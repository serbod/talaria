#summary DNMP - сервисы

= Distributed Network Messaging Protocol =

Коммерческое использование только с разрешения автора.<br>
При использовании необходимо явно указывать ссылку на источник.
<p>Sergey Bodrov, 2010-04-08</p>

= Сервисы =

== Описание ==

<p>Сервисы служат для обеспечения различного пользовательского функционала - групповых чатов (каналов), форумов, блогов, поиска файлов, итд.. Сервисы обеспечиваются узлами. Узел, предоставляющий сервис, считается сервером. Клиенты могут пользоваться сервисами с разных узлов.</p>

== Управление сервисами ==

Сервисы управляются командами. Команды имеют вид:<br>
<code><команда> [аргумент1] [аргумент2] ... [аргументN]</code>
В одном пакете может быть несколько команд, разделенных символами перевода строки.

== Каталог сервисов ==

<p>Каталог сервисов - это список доступных сервисов, которые есть на данном узле. Узел может включать в каталог как свои собственные сервисы, так и сервисы с других узлов (транзитные сервисы). Каталог сервисов сам является сервисом и управляется командами.</p>

== Запросы и подписка ==

<p>Сервисы могут работать по запросам и по подписке. Клиент может отправить запрос (команду) на выбранный сервис и получить ответ. В случае подписки на сервис, информация передается клиенту без запроса.</p>
<p>Донор - это узел, который раздает информацию подписчикам. Доноры могут соединяться в цепочки. При недоступности донора подписчик может подключиться к другому донору сервиса.</p>

== Онлайн и оффлайн ==

<p>В онлайновом сервисе сообщения доставляются от отправителя до получателя без задержек. Если получатель недоступен или не может принять сообщение за установленное время, то сообщение уничтожается и возвращается сообщение о недоступности получателя.</p>
<p>В оффлайновом сервисе сообщения могут задерживаться по пути следования к получателю и передаваться по мере возможности. Если получатель или промежуточный узел недоступен, то сообщение хранится на крайнем узле некоторое время. Если за это время не удалось передать сообщение, то сообщение уничтожается и возвращается сообщение об ошибке доставки.</p>
<p>Недоставленные оффлайновые сообщения могут накапливаться до некоторого предела. Новые сообщения свыше этого предела замещают самые ранние.</p>

== Локальные и распределенные сервисы ==

<p>Локальные сервисы доступны только на одном узле-владельце. Для использования локального сервиса необходимо отправлять запросы по адресу узла-владельца.</p>
<p>Распределенные сервисы доступны на всех узлах-подписчиках. Обмен информацией происходит в обе стороны иерархии подчинения (подписки). Полученную информацию узел отправляет всем своим подписчикам и донорам.</p>

= Описания отдельных сервисов =

<li><a href="https://code.google.com/p/talaria/wiki/auth">AUTH (Authentication) - Аутентификация</a>
<li><a href="info.htm">INFO (Information) - Обмен служебной информацией</a>
<li><a href="usrd.htm">USRD (Users Directory) - Каталог пользователей</a>
<li><a href="srvd.htm">SRVD (Services Directory) - Каталог сервисов</a>
<li><a href="grpc.htm">GRPC (Group Chat) - Канал, групповой чат</a>
<li><a href="flst.htm">FLST (Files Storage) - Хранилище файлов</a>
<li><a href="chat.htm">CHAT (Short messages) - Чат, короткие сообщения между пользователями</a>
<li><a href="mail.htm">MAIL (Long messages) - Почта, длинные сообщения между пользователями</a>
<li><a href="foru.htm">FORU (Forums) - Форумы</a>