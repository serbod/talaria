#summary Каталог сервисов (Services Directory)

<p>Каталог сервисов есть на каждом узле. Каталог сервисов содержит информацию об известных узлу сервисах, позволяет находить сервисы в сети, создавать новые сервисы и изменять информацию о сервисах.</p>

В каталоге сервисов имеются:<br>
<li>список типов сервисов, которые поддерживаются узлом
<li>список соответсивия сервис-подписчик, для маршрутизации сообщений сервисов подписчикам
<li>список известных узлу сервисов


Информация о сервисе:<br>
<li>Тип сервиса
<li>Название сервиса (до 256 печатаемых символов)
<li>Название сервиса-владельца (до 256 печатаемых символов)
<li>Описание сервиса (строка символов)
<li>Число подписчиков
<li>Адрес узла, на котором можно подписаться на сервис
<li>Рейтинг сервиса
<li>Список GUID владельцев


<h3>Формат сообщений DNMP</h3>

<p>Все сообщения каталога сервисов имеют тип <b>SRVD</b>.</p>

<u>Команда сервису</u><br>
Параметры:<br>
<b>cmd</b> - команда<br>
Данные:<br>
параметры команды<br>

<u>Данные</u><br>
Параметры:<br>
<b>data</b> - тип данных<br>
Данные:<br>
содержимое данных<br>

<u>Информация о сервисе</u><br>
Параметры:<br>
<b>type</b> - Тип сервиса<br>
<b>name</b> - Название сервиса (до 256 печатаемых символов)<br>
<b>parent</b> - Название сервиса-владельца (до 256 печатаемых символов)<br>
<b>abonent_count</b> - Число подписчиков<br>
<b>provider</b> - Адрес узла для подписки<br>
<b>rating</b> - Рейтинг сервиса<br>
<b>ownerNN</b> - Список GUID владельцев, где NN порядковый номер<br>
Данные:<br>
Описание сервиса (строка символов)<br>

<h3>Команды:</h3>

<code>
GET_TYPES
Получить список типов сервисов, поддерживаемых узлом

GET_LIST_LOCAL <фильтр>
Получить список имеющихся сервисов на узле

GET_LIST_SUBSCRIBED <GUID_абонента>
Получить список имеющихся сервисов на узле

GET_LIST <фильтр>
Получить список сервисов по заданным условиям. Выполняется поиск сервисов по всему сегменту сети.

GET_INFO <type> <name>
Получить подробную информацию о сервисе

ADD_SERVICE <type> <name> <owner GUID>
Добавить новый сервис. Если адрес-владелец не указан, то им становится отправитель команды. Если сервис уже существует, то возвращается сообщение об ошибке.

SET_PARENT <type> <name> <parent name>
Установить вышестоящий сервис-родитель, которому будет подчинен данный сервис
Доступ: владельцы сервиса

SET_OWNER <type> <name> <owner GUID>
Очистить список узлов-владельцев сервиса и добавить указаный узел.
Доступ: владельцы сервиса

ADD_OWNER <type> <name> <owner GUID>
Добавить адрес в список владельцев сервиса
Доступ: владельцы сервиса

DEL_OWNER <type> <name> <owner GUID>
Удалить адрес из списка владельцев сервиса. Если это единственный владелец, то он не удаляется.
Доступ: владельцы сервиса

SET_DESCR <type> <name> <description>
Установить описание сервиса
Доступ: владельцы сервиса

DEL_SERVICE <type> <name>
Удалить сервис.
Доступ: владельцы сервиса, владелец узла
</code>

<h3>Данные:</h3>

SERVICE_INFO<br>
Содержит информацию о сервисе.<br>
Параметры:<br>
<b>type</b> - тип сервиса<br>
<b>name</b> - название сервиса<br>
<b>parent</b> - имя вышестоящего сервиса-родителя<br>
<b>abonent_count</b> - число абонентов<br>
<b>provider</b> - адрес узла для подписки<br>
<b>rating</b> - рейтинг сервиса<br>
Данные:<br>
Описание сервиса (строка символов)<br>

SERVICES_LIST<br>
Данные:<br>
Содержит список сервисов в формате CSV.<br>
<b>type</b> - тип сервиса<br>
<b>name</b> - название сервиса<br>
<b>parent</b> - имя вышестоящего сервиса-родителя<br>
<b>abonent_count</b> - число абонентов<br>
<b>provider</b> - адрес узла для подписки<br>
<b>rating</b> - рейтинг сервиса<br>

SERVICES_LIST_LOCAL<br>
Данные:<br>
То же, что и SERVICES_LIST, но только сервисы узла.<br>

SERVICES_LIST_SUBSCRIBED<br>
Параметры:<br>
<b>abonent</b> - GUID абонента<br>
Данные:<br>
То же, что и SERVICES_LIST, но только сервисы, на которые подписан заданный абонент.<br>

ABONENTS_LIST<br>
Параметры:<br>
<b>type</b> - тип сервиса<br>
<b>name</b> - имя сервиса<br>
Данные:<br>
Содержит список GUID абонентов сервиса, разделенные переводом строки.<br>