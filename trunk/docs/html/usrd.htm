<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<title>Каталог пользователей</title>
<link href="ice.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<p><b>Каталог пользователей (Users Directory)</b></p>

<p>Каталог пользователей есть на каждом узле. Каталог пользователей позволяет получить информацию об известных узлу пользователях, позволяет находить пользователей в сети, изменять информацию о пользователе.</p>

<p>
Данные пользователя (клиента) узла хранятся на узле в виде паспорта, содержащего все сведения о пользователе, его ключ, непринятые сообщения, подписки, итд.. Подробнее в разделе <a href="passport.htm">Паспорт</a><br>
Данные пользователей других узлов и сервисов хранятся в виде карточек, содержащих только основные сведения о пользователе.
</p>

<p>
В каталоге пользователей имеются:<br>
<li>список паспортов пользователей узла
<li>список карточек абонентов имеющихся на узле сервисов
<li>список карточек прочих пользователей, по которым были запросы данных
</p>

<p>
Карточка пользователя содержит:<br>
<li>GUID - уникальный идентификационный номер клиента
<li>краткое имя
<li>основной адрес
<li>состояние (неизвестно, подключен, отключен, занят, итд..)
<li>рейтинг
</p>


<p><b>Формат сообщений DNMP</b></p>
<p>Все сообщения каталога сервисов имеют тип <b>USRD</b>.</p>

<p>
<u>Команда сервису</u><br>
Параметры:<br>
<b>cmd</b> - команда<br>
Данные:<br>
параметры команды<br>
</p>

<p>
<u>Данные</u><br>
Параметры:<br>
<b>data</b> - тип данных<br>
Данные:<br>
содержимое данных<br>
</p>


<p><b>Команды:</b></p>

<p>
GET_LOCAL_LIST &lt;фильтр&gt;<br>
Получить список имеющихся на узле пользователей
</p>

<p>
GET_LIST &lt;фильтр&gt;<br>
Получить список пользователей по заданным условиям. Выполняется поиск пользователей по всему сегменту сети.
</p>

<p>
GET_INFO &lt;GUID&gt;<br>
Получить подробную информацию о пользователе по его GUID
</p>

<p>
SET_INFO &lt;GUID&gt; &lt;param_name&gt; &lt;value&gt;<br>
Установить сведения о пользователе с заданным GUID. Указывается название параметра и его значение.<br>
Доступ: пользователь, владелец узла
</p>


<p><b>Данные:</b></p>

<p>
USERS_LIST<br>
Содержит список пользователей в формате CSV.<br>
<b>guid</b> - GUID пользователя<br>
<b>name</b> - краткое имя<br>
<b>addr</b> - основной адрес<br>
<b>state</b> - состояние<br>
<b>rating</b> - рейтинг<br>
</p>

</body>
</html>